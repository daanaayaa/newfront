<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏à‡∏¥‡∏ï</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js"></script>
    <style>
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://static.thairath.co.th/media/4DQpjUtzLUwmJZZSE61dsDVnobklYp4HIxgKw8qyoKKf.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.5; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô‡∏•‡∏á */
            z-index: -1;
        }


        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .navbar {
            background-color: #0d3564;
            background-size: cover;
            background-position: center;
            height: 100px; /* ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
            color: white; /* ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô */
            text-align: center;
    }

        .btn-primary {
            background-color: #0d3564;
            border-color: #0d3564;
        }

        .mood-form {
            margin-top: 20px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏°‡∏µ‡∏°‡∏¥‡∏ï‡∏¥ */
        }
        #moodChart {
            max-height: 400px;
            background-color: rgba(255, 255, 255, 0.8); /* ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
            padding: 10px; 
            border-radius: 10px; 
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏°‡∏µ‡∏°‡∏¥‡∏ï‡∏¥ */
        }
        #patientMoodChart {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 10px;
            box-shadow: -35px 0 0 0 rgba(255, 255, 255, 0.8), 35px 0 0 0 rgba(255, 255, 255, 0.8); /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Å‡∏£‡∏≠‡∏ö‡πÅ‡∏Ñ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ç‡∏ß‡∏≤ */
        }

       /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á select */
        .status-pending { background-color: rgb(255, 237, 99) !important; color: rgb(13, 12, 12) !important; }
        .status-confirmed { background-color: rgb(55, 104, 201) !important; color: white !important; }
        .status-canceled { background-color: rgb(221, 95, 139) !important; color: white !important; }
        .status-complete { background-color: rgb(67, 195, 191) !important; color: white !important; }

        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á <select> */
        .form-control {
            border: none;
            border-radius: 5px;
            padding: 5px;
            transition: background-color 0.3s ease-in-out;
            font-weight: normal !important; /* ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏õ‡∏Å‡∏ï‡∏¥ */
        }



        .appointment-section {
            margin-top: 30px;
        }

        #appointmentList {
            width: 100%;              /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà */
            height: 400px;            /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏ö‡∏•‡πá‡∏≠‡∏Å */
            overflow-y: auto;         /* ‡πÉ‡∏´‡πâ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏î‡πâ */
            border: 1px solid #ddd;   /* ‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏ö‡∏•‡πá‡∏≠‡∏Å */
            padding: 10px;
            background-color: #f9f9f9; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
            box-sizing: border-box;   /* ‡πÉ‡∏´‡πâ‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏ö‡πÅ‡∏•‡∏∞ padding */
            flex-grow: 1;             /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå */
        }

        #patientList {
            max-height: 400px;   /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏ö */
            overflow-y: auto;    /* ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏î‡πâ */
            border: 1px solid #ffffff;  /* ‡∏Å‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏ö */
            padding: 10px;
            background-color: #ffffff; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
            box-sizing: border-box;  /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° */
        }

        .card, .appointment-section, .recommendation-section, .patient-list, .mood-chart-container {
            background-color: rgba(187, 203, 222, 0.581);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏°‡∏µ‡∏°‡∏¥‡∏ï‡∏¥ */
        }

        @media (max-width: 768px) {
            .card {
                padding: 10px;
            }
            h2, h3 {
                font-size: 1.2rem;
            }
            .btn {
                font-size: 0.9rem;
            }
            .container {
                padding: 10px;
            }
            .navbar .navbar-brand {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark mb-4">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏à‡∏¥‡∏ï</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item" id="doctorNavItem" style="display: none;">
                        <a class="nav-link" href="doctor_list.html">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏û‡∏ó‡∏¢‡πå</a>
                    </li>
                </ul>
                <span class="navbar-text" id="userInfo"></span>
                <button class="btn btn-light ms-3" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </div>
    </nav>

    <div id="loginPage" class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 col-sm-12">
                <div class="card p-4">
                    <h2 class="text-center mb-4">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="email" class="form-label">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</label>
                            <input type="password" class="form-control" id="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                    </form>
                    <p class="mt-3 text-center">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å? <a href="#" onclick="showRegisterPage()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="container" style="display: none;">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card p-4">
                    <h2 class="text-center mb-4">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
                    <form id="registerForm">
                        <div class="mb-3">
                            <label for="reg_name" class="form-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
                            <input type="text" class="form-control" id="reg_name" required>
                        </div>
                        <div class="mb-3">
                            <label for="reg_email" class="form-label">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</label>
                            <input type="email" class="form-control" id="reg_email" required>
                        </div>
                        <div class="mb-3">
                            <label for="reg_password" class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</label>
                            <input type="password" class="form-control" id="reg_password" required>
                        </div>
                        <div class="mb-3">
                            <label for="reg_confirm_password" class="form-label">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</label>
                            <input type="password" class="form-control" id="reg_confirm_password" required>
                        </div>
                        <div class="mb-3">
                            <label for="reg_role" class="form-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</label>
                            <select class="form-select" id="reg_role" required>
                                <option value="patient">‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</option>
                                <option value="doctor">‡πÅ‡∏û‡∏ó‡∏¢‡πå/‡∏ô‡∏±‡∏Å‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                    </form>
                    <p class="mt-3 text-center">‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß? <a href="#" onclick="showLoginPage()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a></p>
                </div>
            </div>
        </div>
    </div>

<!-- Patient Page -->
<div id="patientPage" class="container" style="display: none;">
    <div class="row">
        <div class="col-md-8">
            <div class="card p-4">
                <h2>‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏à‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                <canvas id="moodChart"></canvas>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card p-4">
                <h3>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                <form id="moodForm" class="mood-form">
                    <div class="mb-3">
                        <label class="form-label">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå:</label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="mood" id="happy" value="happy" required>
                            <label class="form-check-label" for="happy">Happy</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="mood" id="neutral" value="neutral">
                            <label class="form-check-label" for="neutral">Neutral</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="mood" id="sad" value="sad">
                            <label class="form-check-label" for="sad">Sad</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="mood" id="anxious" value="anxious">
                            <label class="form-check-label" for="anxious">Anxious</label>
                        </div>
                    </div>
                     <div class="mb-3">
                        <label for="note" class="form-label">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:</label>
                        <textarea class="form-control" id="note" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </form>
            </div>
        </div>
    </div>

    <!-- ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ -->
    <div class="row mt-4">
        <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢ -->
        <div class="col-md-6">
            <div class="card p-4">
                <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#appointmentModal">‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà</button>
                <table class="table">
                    <thead>
                        <tr>
                            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                            <th>‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏ö</th>
                            <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                        </tr>
                    </thead>
                    <tbody id="appointmentTableBody">
                        <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡πÅ‡∏û‡∏ó‡∏¢‡πå -->
        <div class="col-md-6">
            <div class="card p-4">
                <h3>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏≤‡∏Å‡πÅ‡∏û‡∏ó‡∏¢‡πå</h3>
                <div id="latestRecommendation">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥...</div>
                    <!-- ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏≤‡∏Å‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="appointmentModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="newAppointmentForm">
                    <div class="mb-3">
                        <label for="appointmentDoctor" class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡∏ó‡∏¢‡πå:</label>
                        <select class="form-select" id="appointmentDoctor" required>
                            <!-- ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="appointmentDate" class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
                        <input type="date" class="form-control" id="appointmentDate" required>
                    </div>
                    <div class="mb-3">
                        <label for="appointmentTime" class="form-label">‡πÄ‡∏ß‡∏•‡∏≤:</label>
                        <input type="time" class="form-control" id="appointmentTime" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button type="button" class="btn btn-primary" onclick="saveNewAppointment()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>
</div>

<script>
function loadPatientAppointments() {
    const storedUser = JSON.parse(localStorage.getItem('user'));
    if (!storedUser) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
        return;
    }

    fetch(`http://localhost:3000/getappointments/${storedUser.user_id}`)
        .then(response => response.json())
        .then(appointments => {
            const appointmentTable = document.getElementById("appointmentTableBody");
            appointmentTable.innerHTML = "";

            if (appointments.length === 0) {
                appointmentTable.innerHTML = `<tr><td colspan="3" class="text-center">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢</td></tr>`;
                return;
            }

            // ‡πÅ‡∏¢‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 'completed') ‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô (‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô 'completed')
            const ongoingAppointments = appointments.filter(app => app.status !== "completed");
            const completedAppointments = appointments.filter(app => app.status === "completed");

            // ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô)
            const allAppointments = [...ongoingAppointments, ...completedAppointments];

            allAppointments.forEach(app => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${new Date(app.appointment_date).toLocaleString()}</td>
                    <td>${app.doctor_name}</td>
                    <td>${app.status}</td>
                `;
                appointmentTable.appendChild(row);
            });
        })
        .catch(error => {
            console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢:", error);
        });
}

    document.addEventListener("DOMContentLoaded", function() {
        const storedUser = localStorage.getItem('user');
    
        console.log("Stored user data:", storedUser);  // ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô localStorage
    
        if (!storedUser) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
            return;
        }
    
        const userObj = JSON.parse(storedUser);
        if (!userObj.user_id) {
            alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ");
            return;
        }
    
        console.log("Loaded user data:", userObj);  // ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á userObj ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô localStorage
        console.log("‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö user ID:", userObj.user_id);
    
        loadLatestRecommendation(userObj.user_id);  // ‡∏™‡πà‡∏á user_id ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
    });
    
    
    
    function loadLatestRecommendation() {
    const storedUser = JSON.parse(localStorage.getItem('user'));
    if (!storedUser || !storedUser.user_id) {
        console.error("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ");
        return;
    }

    const patientId = storedUser.user_id; // ‡πÉ‡∏ä‡πâ patient_id ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
    console.log(`Loading recommendation for Patient ID: ${patientId}`);

    fetch(`http://localhost:3000/getlatestadvice/${patientId}`)
        .then(response => response.json())
        .then(data => {
            console.log("Advice Data received:", data);

            if (data && data.advice) {
                document.getElementById('latestRecommendation').textContent = data.advice;
            } else {
                document.getElementById('latestRecommendation').textContent = "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥";
            }
        })
        .catch(error => {
            console.error("Error fetching latest advice:", error);
            document.getElementById('latestRecommendation').textContent = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥";
        });
}

   
// ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå
document.addEventListener("DOMContentLoaded", function () {
    fetch('http://localhost:3000/getdoctors/')
        .then(response => response.json())
        .then(data => {
            let doctorDropdown = document.getElementById("appointmentDoctor");
            doctorDropdown.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡∏ó‡∏¢‡πå --</option>'; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Å‡πà‡∏≠‡∏ô
            data.forEach(doctor => {
                let option = document.createElement("option");
                option.value = doctor.user_id;
                option.textContent = doctor.name;
                doctorDropdown.appendChild(option);
            });
        })
        .catch(error => console.error("Error fetching doctors:", error));

    // ‡πÇ‡∏´‡∏•‡∏î‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
    loadPatientAppointments();
});

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢
function saveNewAppointment() {
    const storedUser = JSON.parse(localStorage.getItem('user'));
    if (!storedUser) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
        return;
    }

    const doctorId = document.getElementById("appointmentDoctor").value;
    const date = document.getElementById("appointmentDate").value;
    const time = document.getElementById("appointmentTime").value;

    if (!doctorId || !date || !time) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô!");
        return;
    }

    const appointmentData = {
        patient_id: storedUser.user_id,  // ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ patient_id
        doctor_id: doctorId,
        appointment_date: `${date} ${time}`
    };

    fetch('http://localhost:3000/saveAppointment', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(appointmentData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!");
            document.getElementById("newAppointmentForm").reset();
            loadPatientAppointments(); // ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà
        } else {
            alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + data.message);
        }
    })
    .catch(error => {
        console.error("Error:", error);
        alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å");
    });
}   
</script>

<script>
    document.getElementById('moodForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const mood = document.querySelector('input[name="mood"]:checked');
        if (!mood) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå!");
            return;
        }

        const note = document.getElementById('note').value;
        const storedUser = JSON.parse(localStorage.getItem('user'));
        
        if (!storedUser) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
            return;
        }

        const today = new Date().toISOString().split('T')[0]; // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö YYYY-MM-DD

        axios.post('http://localhost:3000/adddaily', {
            patient_id: storedUser.user_id,
            record_date: today,
            mood: mood.value,
            note: note
        })
        .then(response => {
            if (response.data.error) {
                alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ");
            } else {
                alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
                document.getElementById('moodForm').reset();
                loadMoodChart(storedUser.user_id);
            }
        })
        .catch(error => {
            console.error("Error saving mood data:", error);
            alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
        });
    });

    function loadMoodChart(patientId) {
        const ctx = document.getElementById('moodChart').getContext('2d');

        axios.get(`http://localhost:3000/getdaily/${patientId}`)
        .then(response => {
            console.log("API Response:", response.data); 

            if (!Array.isArray(response.data)) {
                console.error("Invalid data format from API");
                return;
            }

            const data = response.data.filter(entry => entry.patient_id == patientId);
            if (data.length === 0) {
                console.warn("No mood data available for this patient");
                return;
            }

            const moodCount = {
                "happy": 0,
                "neutral": 0,
                "sad": 0,
                "anxious": 0
            };

            data.forEach(entry => {
                if (moodCount.hasOwnProperty(entry.mood)) {
                    moodCount[entry.mood]++;
                }
            });

            const labels = Object.keys(moodCount);
            const moodData = Object.values(moodCount);
            console.log("Labels:", labels);
            console.log("Mood Data:", moodData);

            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå',
                        data: moodData,
                        backgroundColor: ['#6495ED', '#00CED1', '#DDA0DD', '#FF6699'],
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        })
        .catch(error => {
            console.error("Error loading mood data:", error);
        });
    }
</script>

<!-- Doctor Page -->
    <div id="doctorPage" class="container" style="display: none;">
    <div class="row">
        <!-- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ -->
        <div class="col-md-6 d-flex flex-column">
            <div class="card p-4 flex-grow-1">
                <h3>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏î‡∏π‡πÅ‡∏•</h3>
                <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ -->
                <input type="text" id="searchPatient" class="form-control mb-3" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢..." onkeyup="filterPatients()">
                <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ -->
                <div id="patientList" class="table-responsive"></div>
            </div>
        </div>
        <!-- ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢ -->
        <div class="col-md-6 d-flex flex-column">
            <div class="card p-4 flex-grow-1">
                <h3>‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢</h3>
                <div class="table-responsive" id="appointmentList"></div> <!-- ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢ -->
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="card p-4">
                <h3 class="text-center">‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h3>
                <div class="d-flex justify-content-center">
                    <div id="chartContainer" style="display: none;">
                        <canvas id="patientMoodChart"></canvas>
                    </div>
                </div>
                <div id="noDataMessage" class="text-center"></div>
                <p id="noPatientSelected" class="text-muted text-center">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå</p>

                <div id="recommendationForm" style="display: none;" class="mt-4">
                    <h4 class="text-center">‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h4>
                    <form id="addRecommendationForm">
                        <input type="hidden" id="selectedPatientId">
                        <div class="mb-3">
                            <label for="recommendation" class="form-label">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤:</label>
                            <textarea class="form-control" id="recommendation" rows="4" required></textarea>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
    
<script>
    // ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏û‡∏ó‡∏¢‡πå
    function loadPatientList() {
        axios.get('http://localhost:3000/getusers/')
        .then(response => {
            const patients = response.data.filter(user => user.role === 'patient');
            let patientHTML = `
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>‡∏ä‡∏∑‡πà‡∏≠</th>
                            <th>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                            <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                <tbody>
            `;
        patients.forEach((patient, index) => {
            patientHTML += `
                <tr>
                    <td>${index + 1}</td>
                    <td>${patient.name}</td>
                    <td>${patient.email}</td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="loadPatientMoodChart(${patient.user_id}, '${patient.name}')">‡∏î‡∏π‡∏Å‡∏£‡∏≤‡∏ü</button>
                        <button class="btn btn-sm btn-outline-primary ms-1" onclick="loadRecommendations(${patient.user_id}, '${patient.name}')">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</button>
                    </td>
                </tr>
            `;
        });

        patientHTML += `</tbody></table>`;
        document.getElementById('patientList').innerHTML = patientHTML;
    })
    .catch(error => {
        console.error("There was an error!", error);
        document.getElementById('patientList').innerHTML = '<p class="text-danger">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>';
    });
}
///////‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏à‡∏≤‡∏≤‡∏≤
function filterPatients() {
    let input = document.getElementById("searchPatient").value.toLowerCase();
    let table = document.getElementById("patientList").getElementsByTagName("table")[0];
    let rows = table.getElementsByTagName("tr");

    for (let i = 1; i < rows.length; i++) { // ‡∏Ç‡πâ‡∏≤‡∏°‡πÅ‡∏ñ‡∏ß‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        let patientName = rows[i].getElementsByTagName("td")[1].textContent.toLowerCase();
        if (patientName.includes(input)) {
            rows[i].style.display = "";
        } else {
            rows[i].style.display = "none";
        }
    }
}
//--------

//‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏£‡∏≤‡∏ü
function loadPatientMoodChart(patientId, patientName) {
    console.log(`Loading mood chart for user ID: ${patientId}, Name: ${patientName}`);
    alert(`‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á ${patientName} (ID: ${patientId})`);

    const selectedPatientId = document.getElementById('selectedPatientId');
    const chartContainer = document.getElementById('chartContainer');
    const noDataMessage = document.getElementById('noDataMessage');
    const canvas = document.getElementById('patientMoodChart');

    if (!selectedPatientId || !chartContainer || !noDataMessage || !canvas) {
        console.error("One or more required elements are missing in the HTML.");
        return;
    }

    canvas.width = 400;
    canvas.height = 400;

    const ctx = canvas.getContext('2d'); 
    selectedPatientId.value = patientId;
    chartContainer.style.display = 'block';
    noDataMessage.innerHTML = ''; 

    axios.get(`http://localhost:3000/getdaily/${patientId}`)
        .then(response => {
            const data = response.data;

            if (data.length > 0) {
                chartContainer.style.display = 'block';
                const moodCount = {
                    "happy": 0,
                    "neutral": 0,
                    "sad": 0,
                    "anxious": 0
                };

                data.forEach(entry => {
                    if (moodCount.hasOwnProperty(entry.mood)) {
                        moodCount[entry.mood]++;
                    }
                });

                const totalEntries = data.length;
                const labels = Object.keys(moodCount);
                const moodData = Object.values(moodCount);

                const moodPercentage = moodData.map(value => ((value / totalEntries) * 100).toFixed(2) + "%");

                if (window.patientMoodChart instanceof Chart) {
                    window.patientMoodChart.destroy();
                }

                // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü Pie Chart ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå
                window.patientMoodChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: labels.map((label, index) => `${label} (${moodPercentage[index]})`), 
                        datasets: [{
                            label: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå',
                            data: moodData, 
                            backgroundColor: ['#6495ED', '#00CED1', '#DDA0DD', '#FF6699'], 
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            title: {
                                display: true,
                                text: `‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á ${patientName}`
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                            }
                        }
                    }
                });

            } else {
                chartContainer.style.display = 'none';
                noDataMessage.innerHTML = '<p class="text-center mt-3 text-warning">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ó‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ</p>';
            }
        })
        .catch(error => {
            console.error("Error loading patient mood data:", error);
            noDataMessage.innerHTML = '<p class="text-center mt-3 text-danger">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>';
        });
}

    // ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤
    function loadRecommendations(patientId, patientName) {
    console.log(`Loading recommendations for Patient ID: ${patientId}`);
    document.getElementById('recommendationForm').style.display = 'block';
    document.getElementById('selectedPatientId').value = patientId;

    const titleElement = document.querySelector('#recommendationForm h4'); 
    if (titleElement) {
        titleElement.innerText = `‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ${patientName}`;
    }

    // **‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ä‡πà‡∏≠‡∏á input ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡∏°‡πà**
    document.getElementById('recommendation').value = '';
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥"
document.getElementById('addRecommendationForm').addEventListener('submit', async function(event) {
    event.preventDefault();

    const patientId = document.getElementById('selectedPatientId').value;
    const recommendationText = document.getElementById('recommendation').value;
    const doctorId = localStorage.getItem('user_id'); // ‚úÖ ‡∏î‡∏∂‡∏á user_id ‡∏°‡∏≤‡πÉ‡∏ä‡πâ

    if (!doctorId) {
        alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏û‡∏ó‡∏¢‡πå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÉ‡∏´‡∏°‡πà");
        return;
    }

    if (!recommendationText) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å!");
        return;
    }

    console.log("Sending data to server:", { patient_id: patientId, recommendation: recommendationText, doctor_id: doctorId });

    try {
        const response = await axios.post(`http://localhost:3000/addrecommendations`, {
            patient_id: patientId,
            recommendation: recommendationText,
            doctor_id: doctorId // ‚úÖ ‡∏™‡πà‡∏á user_id ‡πÄ‡∏õ‡πá‡∏ô doctor_id
        });

        console.log("Response from server:", response.data);

        if (response.data.error) {
            alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${response.data.msg}`);
        } else {
            alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
            document.getElementById('recommendation').value = ''; // ‚úÖ ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå input ‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏™‡∏£‡πá‡∏à
        }
    } catch (error) {
        console.error("Error saving recommendations:", error);
        alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥");
    }
});
    //‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏≠
    function loadDoctorAppointments(doctorId) {
    axios.get(`http://localhost:3000/getappointments/doctor/${doctorId}`)
    .then(response => {
        let appointments = response.data;

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏õ‡πÉ‡∏´‡∏°‡πà
        appointments.sort((a, b) => new Date(a.appointment_date).getTime() - new Date(b.appointment_date).getTime());

        let appointmentHTML = `        
            <div class="appointment-block">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</th>
                            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                            <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                        </tr>
                    </thead>
                    <tbody>
        `;

        if (appointments.length > 0) {
            appointments.forEach(app => {
                const appDate = new Date(app.appointment_date);
                appointmentHTML += `
                    <tr>
                        <td>${app.patient_name}</td>
                        <td>${appDate.toLocaleString()}</td>
                        <td>
                            <select class="form-control" id="status_${app.appointment_id}" onchange="updateAppointmentStatus(${app.appointment_id}, this.value)">
                                <option value="pending" ${app.status === 'pending' ? 'selected' : ''}>‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                                <option value="confirmed" ${app.status === 'confirmed' ? 'selected' : ''}>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</option>
                                <option value="canceled" ${app.status === 'canceled' ? 'selected' : ''}>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</option>
                                <option value="complete" ${app.status === 'complete' ? 'selected' : ''}>‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
                            </select>
                        </td>
                    </tr>
                `;
            });
        } else {
            appointmentHTML += `<tr><td colspan="3" class="text-center">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢</td></tr>`;
        }

        appointmentHTML += `</tbody></table></div>`;
        document.getElementById('appointmentList').innerHTML = appointmentHTML;
    })
    .catch(error => {
        console.error('Error loading appointments:', error);
        document.getElementById('appointmentList').innerHTML = '<div class="alert alert-danger">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢</div>';
    });
}


// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢
function updateAppointmentStatus(appointmentId, newStatus) {
    axios.put(`http://localhost:3000/updateappointmentstatus/${appointmentId}`, {
        status: newStatus
    })
    .then(response => {
        alert(`‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÄ‡∏õ‡πá‡∏ô ${newStatus}`);
        const doctorId = 1; // ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô doctorId ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        loadDoctorAppointments(doctorId);
    })
    .catch(error => {
        console.error('Error updating appointment status:', error);
        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢');
    });
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢
function editAppointment(appointmentId) {
    // ‡∏•‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å
    alert('‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß');
}

// ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÇ‡∏´‡∏•‡∏î ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢
document.addEventListener("DOMContentLoaded", function() {
    const doctorId = 1; 
    loadDoctorAppointments(doctorId);
    loadPatientList();
});
</script>

<!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏ß‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        document.addEventListener('DOMContentLoaded', function() {
            const storedUser = localStorage.getItem('user');
            if (storedUser) {
                const user = JSON.parse(storedUser);
                if (user.role === 'patient') {
                    showPatientPage(user);
                } else if (user.role === 'doctor') {
                    showDoctorPage(user);
                }
            }
        });

        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
        function showRegisterPage() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('registerPage').style.display = 'block';
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
        function showLoginPage() {
            document.getElementById('registerPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'block';
        }

        // ‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå
        function logout() {
            localStorage.removeItem('user');
            document.getElementById('patientPage').style.display = 'none';
            document.getElementById('doctorPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'block';
            document.getElementById('userInfo').textContent = '';
            document.getElementById('doctorNavItem').style.display = 'none';
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
        function showPatientPage(user) {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('doctorPage').style.display = 'none';
            document.getElementById('patientPage').style.display = 'block';
            document.getElementById('userInfo').textContent = `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${user.name} (‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢)`;
            loadMoodChart(user.user_id);
            loadPatientAppointments(user.user_id);
            loadDoctorsForAppointment();
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå
        function showDoctorPage(user) {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('patientPage').style.display = 'none';
            document.getElementById('doctorPage').style.display = 'block';
            document.getElementById('doctorNavItem').style.display = 'block';
            document.getElementById('userInfo').textContent = `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${user.name} (‡πÅ‡∏û‡∏ó‡∏¢‡πå)`;
            loadPatientList();
            loadAppointments(user.user_id);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
    
            axios.post('http://localhost:3000/login', {
                email: email,
                password: password
            })
            .then(response => {
                if (response.data.error) {
                    alert(response.data.msg);
                } else {
                    const user = response.data.user;
                    localStorage.setItem('user', JSON.stringify(user));
                    if (user.role === 'patient') {
                        showPatientPage(user);
                    } else if (user.role === 'doctor') {
                        showDoctorPage(user);
                    }
                }
            })
            .catch(error => {
                console.error("There was an error!", error);
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö");
            });
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('reg_name').value;
            const email = document.getElementById('reg_email').value;
            const password = document.getElementById('reg_password').value;
            const confirmPassword = document.getElementById('reg_confirm_password').value;
            const role = document.getElementById('reg_role').value;

            if (password !== confirmPassword) {
                alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");
                return;
            }

            axios.post('http://localhost:3000/addusers', {
                user_name: name,
                users_email: email,
                password: password,
                role: role
            })
            .then(response => {
                if (response.data.error) {
                    alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÑ‡∏î‡πâ: " + response.data.details);
                } else {
                    alert("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö");
                    showLoginPage();
                }
            })
            .catch(error => {
                console.error("There was an error!", error);
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å");
            });
        });

    </script>
</html>
